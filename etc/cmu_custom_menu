# CMU Custom Menu Option
#
# This file allows CMU users to add their own menu options to the CMU GUI.
# These custom menu options are displayed in the popup menu that appears
# after selecting one or more nodes from the left-side of the CMU GUI and
# right-clicking on the selection.
#
# file format: one line per custom menu option
# line syntax: GUI|GUI_NO_ACK|GUI_NOLOGIN|SERVER|SERVER_NO_ACK|TERMINAL;<title>;<command>
# 2 semicolons per line are required!
#
#   first field: GUI           = execute the command from the CMU GUI
#                GUI_NO_ACK    = execute the command from the CMU GUI without feedback window
#                GUI_NOLOGIN   = execute the command from the CMU GUI and make it active for anyone to invoke
#                SERVER        = execute the command from the CMU server
#                SERVER_NO_ACK = execute the command from the CMU server without feedback window
#                TERMINAL      = execute the command from the CMU server, through a terminal on CMU GUI
#  second field: <title>       = name of this option in the menu
#   third field: <command>     = command line to be executed, including args
#
#
# In the <title> field, a '|' can be used to create a submenu. For example,
# to configure two webpages under one submenu called "Web":
# GUI;Web|CMU;BROWSE http://www.hpe.com/info/cmu
# GUI;Web|HPE ;BROWSE http://www.hpe.com
#
#
# In the <command> field, CMU will convert the following keywords to their
# respective values:
#     CMU_SERVER_IP_ADDRESS  : IP address of the CMU management node
#     CMU_NODE_BMC_IP        : space-separated list of management card IP
#                              addresses for the selected node(s). See
#                              example below for usage.
#     CMU_TEMP_NODE_FILE or CMU_TEMP_IP_FILE :
#                              temporary file containing the selected nodes,
#                              one nodename or IP per line
#     CMU_ONE_NODE_SELECTED, CMU_ONE_IP_SELECTED, CMU_ONE_BMC_IP_SELECTED :
#                              nodename/IP/mgmt_IP of selected node. Note that if
#                              more than one node is selected, this menu option
#                              will be disabled. This is useful for commands that
#                              are only designed to operate with one node.
#     CMU_ONE_GROUP_SELECTED or CMU_ONE_ARCHIVED_GROUP_SELECTED :
#                              selected group name. Note that if more than
#                              one group is selected, this menu option will
#                              be disabled.

# The following additional keyword will be converted for 'GUI' commands:
#     BROWSE                 : the default web browser on the node running
#                              the CMU GUI

# CMU recommends that these commands be simple scripts that do not produce
# a lot of output. CMU recommends that these commands be tested locally
# before configuring them in CMU.
#
# The CMU GUI will be dynamically updated (since v7.2).
#

# Sample menu option 'Show Job Power Stats', that will show the power
# and energy consumption during the job
#TERMINAL;Show Job Power Stats;/opt/clmgr/bin/cmu_show_attributes -t archivedGroups -n CMU_ONE_ARCHIVED_GROUP_SELECTED

# Sample menu option 'Clear /tmp', that will use pdsh to
# delete the contents of /tmp on the selected nodes. Note
# that single quotes around the pdsh sub-command are needed
# to ensure that the wildcard '*' works on the target nodes
# and not on the CMU server node.
#SERVER;Clear /tmp;env WCOLL=CMU_TEMP_NODE_FILE /opt/clmgr/bin/pdsh -S 'rm -rf /tmp/*'

# Sample menu option 'CMU Webpage' that will launch the
# default web browser (if supported) and display the CMU
# web page. NOTE that anyone who launches the CMU GUI can
# invoke this menu option (they are not required to log
# into the GUI to run this command since this command will
# run on their desktop)
#GUI_NOLOGIN;CMU Webpage;BROWSE http://www.hpe.com/info/cmu

# Sample menu option 'iLO Webpage' that will launch the
# default browser (if supported) and display the iLO web
# page for each server selected. Note that anyone who
# launched the CMU GUI can invoke this menu option.
# GUI_NOLOGIN; iLO Webpage; BROWSE CMU_NODE_BMC_IP
#
# Note that your default browser may not support multiple
# IP addresses on the command-line (firefox does, but others
# may not). If your default browser does not support this,
# you may want to substitute CMU_NODE_BMC_IP with
# CMU_ONE_BMC_IP_SELECTED, like this:
#GUI_NOLOGIN; iLO Webpage; BROWSE https://CMU_ONE_BMC_IP_SELECTED

# Sample menu option 'colplot' that will launch the
# default web browser (if supported) an display colplot
# served from the CMU management node (this options
# assumes that colplot has been configured on the CMU
# management node; see the CMU Users Guide for details).
#GUI;colplot;BROWSE http://CMU_SERVER_IP_ADDRESS/colplot

# Sample menu options in an 'audit' submenu that execute
# system inventory commands and compare the output from
# the selected nodes using the new cmu_diff feature in
# the cmu_dsh command.
#TERMINAL;audit|dmidecode;/opt/clmgr/bin/cmu_dsh -f CMU_TEMP_NODE_FILE -c "dmidecode" -e " -v0 -R0"
#TERMINAL;audit|lspci;/opt/clmgr/bin/cmu_dsh -f CMU_TEMP_NODE_FILE -c "lspci" -e " -v0 -R0"

TERMINAL;Edit|Monitoring Configuration; if [ -z "$EDITOR" ]; then EDITOR=vi;fi; $EDITOR /opt/clmgr/etc/ActionAndAlertsFile.txt
TERMINAL;Edit|Custom Menu Configuration; if [ -z "$EDITOR" ]; then EDITOR=vi;fi; $EDITOR /opt/clmgr/etc/cmu_custom_menu

# Brings up information about using Ansible with CMU. Comment out if not using Ansible.
TERMINAL;Ansible|About Ansible Integration;${PAGER:-less} /opt/clmgr/contrib/ansible/cmu_ansible_integration
